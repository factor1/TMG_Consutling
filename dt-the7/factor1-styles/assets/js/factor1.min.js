!function(e){console.log("[Success! - Factor1 JS Initialized] - In Development");var t=0;e(document).ready(function(){if(e("body.post-type-archive-tmg_resources").length){var a=e("#resource-posts"),r=window.loggedin||!1,o=window.wpJsonUrl||"";if(o){var c={fetch:function(){e.get(o+"tmg_resources/?_embed&per_page=20&page="+t,{get_param:"value",category:e("div.filter-select.categories").data("value"),tag:e("div.filter-select.tags").data("value")},function(e){if(a.empty(),e&&e.length){var t=e.map(function(e){var t=[],a=e._embedded["wp:term"]||[];a.forEach(function(e){e.forEach(function(e){t.push({id:e.id,name:e.name,link:e.link,taxonomy:e.taxonomy})})});var o=t.filter(function(e){return"resource_category"===e.taxonomy}),c=t.filter(function(e){return"resource_tag"===e.taxonomy}),n=new Date(Date.parse(e.date)),s=e._embedded["wp:featuredmedia"]||[],i={id:e.id||"",title:e.title.rendered||"",date:n.toDateString(),link:e.link||"",thumbnail:s&&s[0].media_details?s[0].media_details.sizes.resources.source_url:"//tmgconsulting.com/wp-content/themes/dt-the7/images/tmg_fallback.jpg",excerpt:e.excerpt.rendered||"",categories:o,tags:c,resourceType:e.acf.resource_type,resourceUpload:e.acf.resource_upload};return i.button=function(){return r?"free"===i.resourceType?'<a href="'+i.resourceUpload+'" class="resource-button">Download</a>':'<a href="'+i.resourceUpload+'" class="resource-button">Download</a>':"free"===i.resourceType?'<a href="'+i.resourceUpload+'" class="resource-button">Download</a>':'<a class="resource-button f1login" onClick="openModal()">Login to download</a>'}(),i});t.forEach(function(e){a.append('<div class="row" style="margin-bottom: 40px;"><div class="col-3 text-center"><img src="'+e.thumbnail+'" /></div><div class="col-9"><h2 class="resource-title">'+e.title+'</h2><span class="resource-post-date">'+e.date+'</span> <span class="resource-category">'+e.categories.map(function(e){return e.name}).join(", ")+'</span> | <span class="resource-topics">Topics:</span> '+e.tags.map(function(e){return e.name}).join(", ")+' <div class="resource-excerpt">'+e.excerpt+e.button+"</div></div></div>")})}},"json")}};e(document).on("click","div.filter-select",function(t){e(this).toggleClass("active")}),e(document).on("click","div.filter-dropdown li",function(t){var a=e(this).closest(".filter-select"),r=a.children("span:first-child");a.data("value",e(this).data("value")),r.html(e(this).text())}),e(document).on("click","a.filter-submit",function(e){e.preventDefault(),c.fetch()}),e(document).on("click","a.filter-clear",function(t){t.preventDefault(),e("div.filter-select.categories").removeClass("active").data("value","").children("span:first-child").html("Categories"),e("div.filter-select.tags").removeClass("active").data("value","").children("span:first-child").html("Topics"),c.fetch()}),e("a.filter-clear").click()}}})}(jQuery);